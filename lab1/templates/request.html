<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/styles/request_style.css?v=4">
 
    <title>Корзина - BMW</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
</head>

<body>
    <div class="footer-spacer"></div>
    <header>
        <div class="header-container">
            <div class="logo">
                <a href="/hello" style="text-decoration: none; color: white;">
                    <span style="font-size: 32px;">Устройства для BMW</span>
                </a>
                <a href="/hello">
                    <img src="http://localhost:9000/lab1/img/icon-logo.f2ce70f.svg" class="logo-small-image">
                </a>
            </div>
            
            <div class="header-actions">
              
            </div>
        </div>
    </header>

    <div class="container">
        <div class="calculator">
           
            <div class="calculator-header">
                <h2 class="calculator-main-title" style= "font-weight: 300;">КАЛЬКУЛЯТОР</h2>
                <div class="calculator-controls">
                    <div class="power-display">
                        <strong style= "font-weight: 700;">Общая мощность:</strong> 
                        {{$total := 0}}
                        {{range $id, $item := .cartItems}}
                            {{$power := replace $item.Power " Вт" ""}}
                            {{$total = add $total (atoi $power)}}
                        {{end}}
                        {{$total}} Вт
                    </div>
                    <div class="resistance-controls">
                        <h3 class="resistance-title" style= "font-weight: 700;">Общее сопротивление:</h3>
                        <input type="number" class="input-field" placeholder="Ом">
                        <button class="calculate-total-btn" style= "font-weight: 700;">Рассчитать</button>
                    </div>
                </div>
            </div>

           

            <table class="calculator-table" style="border-bottom: 2px solid #e0e0e0; " >
                <thead>
                    <tr>
                        <th style= "color: #bababa;">Устройство</th>
                        <th style= "color: #bababa;">Количество</th>
                        <th style= "color: #bababa;">Введите сопротивление:</th>
                        <th style= "color: #bababa;">Действие</th>
                        <th style= "color: #bababa;">Необходимая сила тока:</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {{range $id, $item := .cartItems}}
                    <tr style="border-bottom: 2px solid #e0e0e0; ">
                        <td >
                            <div class="product-cell" >
                                <div class="product-image">
                                    <img src="http://localhost:9000/lab1/img/{{$item.ID}}.jpg" alt="{{$item.Title}}">
                                </div>
                                <div class="product-info"  >
                                    <div class="product-title" style="font-weight: 300;">{{$item.Title}}</div>
                                    <div class="product-power">Мощность: {{$item.Power}}</div>
                                </div>
                            </div>

                        </td>
                        <td>
                            <div class="quantity-controls"  >
                                <button class="quantity-btn" onclick="changeQuantity(this, -1)" >-</button>
                                <input type="number" class="quantity-input" value="1" min="1" onchange="updateTotalPower()">
                                <button class="quantity-btn" onclick="changeQuantity(this, 1)">+</button>
                            </div>
                        </td>
                        <td>
                            <input type="number" class="resistance-input" placeholder="Ом">
                        </td>
                        <td>
                            <button class="calculate-btn" style= "font-weight: 700;">Рассчитать</button>
                        </td>
                        <td class="current-result">Число</td>
                       
                    </tr>
                    {{end}}
                </tbody>
            </table>
            
            <div class="bottom-controls">
                <a href="/hello" class="back-btn" style= "font-weight: 700;">Главная</a>
                <div class="total-current-container">
                    <div class="total-current">
                        <strong>Необходимая сила тока:</strong> Число
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>